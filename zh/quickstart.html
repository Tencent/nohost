<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>准备 | Nohost</title>
    <meta name="description" content="Multi-user &amp; multi-env web debugging proxy based on whistle">
    <link rel="shortcut icon" href="/nohost/favicon.ico">
    
    <link rel="preload" href="/nohost/assets/css/0.styles.0e44c639.css" as="style"><link rel="preload" href="/nohost/assets/js/app.166880dd.js" as="script"><link rel="preload" href="/nohost/assets/js/2.fe8923dd.js" as="script"><link rel="preload" href="/nohost/assets/js/18.afae899a.js" as="script"><link rel="prefetch" href="/nohost/assets/js/10.8ee8cbc3.js"><link rel="prefetch" href="/nohost/assets/js/11.631a9289.js"><link rel="prefetch" href="/nohost/assets/js/12.8ce5037d.js"><link rel="prefetch" href="/nohost/assets/js/13.cd441155.js"><link rel="prefetch" href="/nohost/assets/js/14.65987e38.js"><link rel="prefetch" href="/nohost/assets/js/15.97269670.js"><link rel="prefetch" href="/nohost/assets/js/16.5f9ecb2f.js"><link rel="prefetch" href="/nohost/assets/js/17.30108815.js"><link rel="prefetch" href="/nohost/assets/js/19.3566bf1b.js"><link rel="prefetch" href="/nohost/assets/js/20.237c4f6a.js"><link rel="prefetch" href="/nohost/assets/js/21.12c6ee23.js"><link rel="prefetch" href="/nohost/assets/js/22.f7f65d35.js"><link rel="prefetch" href="/nohost/assets/js/23.5bdd6cfa.js"><link rel="prefetch" href="/nohost/assets/js/3.408fea80.js"><link rel="prefetch" href="/nohost/assets/js/4.529089b1.js"><link rel="prefetch" href="/nohost/assets/js/5.1225eda4.js"><link rel="prefetch" href="/nohost/assets/js/6.9e4cb3df.js"><link rel="prefetch" href="/nohost/assets/js/7.b1a61ed6.js"><link rel="prefetch" href="/nohost/assets/js/8.c271a14b.js"><link rel="prefetch" href="/nohost/assets/js/9.520ba889.js">
    <link rel="stylesheet" href="/nohost/assets/css/0.styles.0e44c639.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nohost/" class="home-link router-link-active"><img src="/nohost/logo.png" alt="Nohost" class="logo"> <span class="site-name can-hide">Nohost</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/nohosts/nohost.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/nohosts/nohost.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/nohost/" class="sidebar-link">概述</a></li><li><a href="/nohost/zh/quickstart.html" class="active sidebar-link">快速上手</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nohost/zh/quickstart.html#准备" class="sidebar-link">准备</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/quickstart.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/quickstart.html#配置" class="sidebar-link">配置</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/quickstart.html#访问" class="sidebar-link">访问</a></li></ul></li><li><section class="sidebar-group depth-0"><a href="/nohost/zh/admin/" class="sidebar-heading clickable"><span>管理员</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/nohost/zh/admin/accounts.html" class="sidebar-link">账号</a></li><li><a href="/nohost/zh/admin/certs.html" class="sidebar-link">证书</a></li><li><a href="/nohost/zh/admin/config.html" class="sidebar-link">配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nohost/zh/admin/config.html#入口配置" class="sidebar-link">入口配置</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/admin/config.html#账号规则" class="sidebar-link">账号规则</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/admin/config.html#规则模板" class="sidebar-link">规则模板</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/admin/config.html#模板数据" class="sidebar-link">模板数据</a></li></ul></li><li><a href="/nohost/zh/admin/whistle.html" class="sidebar-link">Whistle</a></li><li><a href="/nohost/zh/admin/system.html" class="sidebar-link">系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nohost/zh/admin/system.html#管理员" class="sidebar-link">管理员</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/admin/system.html#设置域名" class="sidebar-link">设置域名</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/admin/system.html#auth-key" class="sidebar-link">Auth Key</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/admin/system.html#重启操作" class="sidebar-link">重启操作</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/nohost/zh/developer/" class="sidebar-heading clickable"><span>普通开发</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/nohost/zh/developer/usage.html" class="sidebar-link">如何使用</a></li><li><a href="/nohost/zh/developer/capture.html" class="sidebar-link">抓包调试</a></li><li><a href="/nohost/zh/developer/plugin.html" class="sidebar-link">安装插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/nohost/zh/developer/plugin.html#安装全局插件" class="sidebar-link">安装全局插件</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/developer/plugin.html#安装所有账号的插件" class="sidebar-link">安装所有账号的插件</a></li><li class="sidebar-sub-header"><a href="/nohost/zh/developer/plugin.html#安装指定账号的插件" class="sidebar-link">安装指定账号的插件</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/nohost/zh/users/" class="sidebar-heading clickable"><span>普通用户</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/nohost/zh/users/pd.html" class="sidebar-link">产品经理</a></li><li><a href="/nohost/zh/users/tester.html" class="sidebar-link">测试同事</a></li><li><a href="/nohost/zh/users/others.html" class="sidebar-link">外网用户</a></li></ul></section></li><li><a href="/nohost/zh/api.html" class="sidebar-link">API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/nohost/zh/advance/" class="sidebar-link">高级应用</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="准备"><a href="#准备" class="header-anchor">#</a> 准备</h2> <p>安装 nohost 之前，建议先做好以下工作：</p> <ol><li>准备一台服务器，假设IP为：10.1.2.3（以你自己的服务器为准，建议4核8G以上到配置）</li> <li>准备一个域名（以下假设为：imwebtest.oa.com），并把 DNS 指向上述服务器（10.1.2.3）</li> <li>收集涉及域名的证书对，只支持 <code>xxx.key</code> 和 <code>xxx.crt</code>（非必须，但建议用证书的证书，否则要么 nohost 里面无法查看 HTTPS 的内容，要么每个访问 nohost 的客户端都要安装一遍根证书）</li></ol> <blockquote><p>申请域名的好处是可以直接用域名访问管理及账号页面，手机也可以通过域名设置代理访问 nohost，方便记忆及输入</p></blockquote> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>首先，需要安装Node（建议使用最新的LTS版本）：<a href="https://nodejs.org/en/" target="_blank" rel="noopener noreferrer">Node<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Node安装成功后，通过npm安装 <code>nohost</code>：</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i -g @nohost/server --registry<span class="token operator">=</span>https://r.npm.taobao.org
</code></pre></div><p>安装完成后执行启动命令：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>n2 start
</code></pre></div><blockquote><p>nohost 的默认端口为 8080，如果需要自定义端口，可以通过 <code>n2 restart -p 80</code> 设置。
如果命令行提示没有对应命令，检查下系统环境变量 <code>PATH</code> 配置，看看 nohost 安装后生成的命令所在目录是否已添加到 <code>PATH</code>。</p></blockquote> <p>重启 <code>nohost</code>：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>n2 restart
</code></pre></div><p>停止 <code>nohost</code>：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>n2 stop
</code></pre></div><p>重置管理员账号：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>n2 restart --reset
</code></pre></div><h2 id="配置"><a href="#配置" class="header-anchor">#</a> 配置</h2> <p>安装启动成功后，打开管理员页面 <code>http://10.1.2.3:8080/admin.html#system/administrator</code>，输入默认用户名（<code>admin</code>）和密码（<code>123456</code>），打开系统配置后：</p> <blockquote><p>其中 <code>10.1.2.3</code> 表示nohost运行的服务器IP，具体根据实际 ServerIP 替换</p></blockquote> <ol><li>修改管理员的默认账号名和密码（<strong>不建议使用默认账号及密码，如果忘记管理员账号名或密码，可以通过 <code>n2 restart --reset</code> 重置</strong>）</li> <li>设置nohost的域名（将申请的域名填上，如果需要设置多个域名，可以通过逗号 <code>,</code> 分隔）</li> <li>上传涉及的 key 和证书（证书只支持 <code>.crt</code> 格式）</li></ol> <p><img src="https://user-images.githubusercontent.com/11450939/69247822-0c010b00-0be6-11ea-8b03-5a0ae4b12c6e.gif" alt="admin"></p> <h2 id="访问"><a href="#访问" class="header-anchor">#</a> 访问</h2> <p>nohost 本身就是一个代理，可以直接配置浏览器或系统代理访问，也可以通过 Nginx反向代理访问，为方便大家使用，针对不同的人群可以使用不同的方案（以下用 <code>imwebtest.oa.com</code> 表示 nohost 的域名，具体域名需要自己申请及设置）。</p> <h4 id="前端开发"><a href="#前端开发" class="header-anchor">#</a> 前端开发</h4> <p>前端开发建议使用最新版的 <a href="https://github.com/avwo/whistle" target="_blank" rel="noopener noreferrer">whistle<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，可以通过以下两种方式访问 nohost：</p> <ol><li><p>直接在 whistle 上配置远程规则</p> <div class="language-txt extra-class"><pre class="language-text"><code>@http://imwebtest.oa.com:8080/whistle.nohost/cgi-bin/plugin-rules
</code></pre></div><blockquote><p>上述配置表示 whistle 从 <code>http://imwebtest.oa.com:8080/whistle.nohost/cgi-bin/plugin-rules</code> 获取 nohost 的生成的入口规则，并且如果 nohost 规则有变会自动更新规则，这些规则是由 nohost 上传证书的域名及界面 <code>配置/入口配置</code> 配置的规则自动生成（具体参见后面的<strong>配置</strong>），这些规则可以自动过滤掉无关请求，只会把相关的请求转到nohost。</p></blockquote> <p>当然这种直接手动配置在 whistle 上还不是最好的方式，更建议的方式是把这些规则集成到插件里面，这样开发者只需安装插件即可。</p></li> <li><p><strong>【强烈推荐】</strong> 集成 whistle 插件，具体参考：<a href="https://github.com/nohosts/whistle.nohost-imweb/blob/master/dev.md" target="_blank" rel="noopener noreferrer">https://github.com/nohosts/whistle.nohost-imweb/blob/master/dev.md<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li></ol> <h4 id="后台开发"><a href="#后台开发" class="header-anchor">#</a> 后台开发</h4> <p>后台开发推荐使用 Chrome 的 <a href="https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif" target="_blank" rel="noopener noreferrer">SwitchyOmega<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 配置代理规则 （如上述代理配置 <code>imwebtest.oa.com</code> + <code>8080</code>），如果不想所有请求都转到 nohost，可以配置 SwitchyOmega 的自动切换或者用PAC脚本代替，也可以参考 <code>nohost-client</code> 打包一个客户端：<a href="https://github.com/nohosts/nohost-client" target="_blank" rel="noopener noreferrer">https://github.com/nohosts/nohost-client<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。手机端可以直接配代理，或者通过 VPN App 设置代理，如 iPhone 可以用 <code>detour</code>。</p> <h4 id="其他人员"><a href="#其他人员" class="header-anchor">#</a> 其他人员</h4> <p>非开发人员尽量使用客户端、APP、或通过外网转发的方式，减少他们的接入成本，如何打包客户端参考：<a href="https://github.com/nohosts/nohost-client" target="_blank" rel="noopener noreferrer">https://github.com/nohosts/nohost-client<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>；手机等同后台开发的配置方式。</p> <h4 id="外网访问"><a href="#外网访问" class="header-anchor">#</a> 外网访问</h4> <p>一般 nohost 是部署在公司内网，外网是不可以直接访问，需要通过接入层（如：Nginx）转发，如何配置转发参见详细文档：https://nohosts.github.io/nohost/</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/nohost/" class="prev router-link-active">概述</a></span> <span class="next"><a href="/nohost/zh/admin/accounts.html">账号</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/nohost/assets/js/app.166880dd.js" defer></script><script src="/nohost/assets/js/2.fe8923dd.js" defer></script><script src="/nohost/assets/js/18.afae899a.js" defer></script>
  </body>
</html>
